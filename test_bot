import amino

client = amino.Client()

client.login(email="EMAIL_HERE", password="PASSWORD_HERE")

subclient = amino.SubClient(comId="COMID_HERE", profile=client.profile)

oldMessages = []

with open("oldMessages.txt", "r") as oldFile:
    for messageId in oldFile.read().split("\n")[:-1]:
        oldMessages.append(messageId)

while True:
    readChats = subclient.get_chat_threads().chatId

    for chatId in readChats:
        msg = subclient.get_chat_messages(chatId=chatId, size=25)
        for message, messageId, author in zip(msg.content, msg.messageId, msg.author.nickname):
            if not messageId in oldMessages:
                print(chatId, author, message)

                # "!ping" comnand
                if str(message).startswith("!ping"):
                    subclient.send_message(chatId, "Pong!")

                oldMessages.append(messageId)
                with open("oldMessages.txt", "a") as oldFile:
                    oldFile.write(messageId + "\n")
                    oldFile.close()
